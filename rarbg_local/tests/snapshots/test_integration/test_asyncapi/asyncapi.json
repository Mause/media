{
  "asyncapi": "3.0.0",
  "info": {
    "title": "Create an AsyncAPI document for an API with WebSocket",
    "version": "1.0.0"
  },
  "servers": {
    "production": {
      "host": "media.mause.me",
      "pathname": "/ws",
      "protocol": "wss"
    }
  },
  "operations": {
    "helloListener": {
      "action": "receive",
      "channel": {
        "$ref": "#/channels/root"
      },
      "messages": [
        {
          "$ref": "#/channels/root/messages/get_messages"
        },
        {
          "$ref": "#/channels/root/messages/results"
        }
      ]
    }
  },
  "channels": {
    "root": {
      "address": "/",
      "messages": {
        "get_results": {
          "payload": {
            "$ref": "#/components/schemas/StreamArgs"
          }
        },
        "results": {
          "payload": {
            "$ref": "#/components/schemas/ITorrent"
          }
        }
      },
      "bindings": {
        "ws": {
          "query": {
            "type": "object",
            "properties": {}
          }
        }
      }
    }
  },
  "components": {
    "messages": {},
    "schemas": {
      "StreamArgs": {
        "properties": {
          "authorization": {
            "format": "password",
            "title": "Authorization",
            "type": "string",
            "writeOnly": true
          },
          "type": {
            "enum": [
              "series",
              "movie"
            ],
            "title": "Type",
            "type": "string"
          },
          "tmdb_id": {
            "title": "Tmdb Id",
            "type": "integer"
          },
          "season": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Season"
          },
          "episode": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "default": null,
            "title": "Episode"
          }
        },
        "required": [
          "authorization",
          "type",
          "tmdb_id"
        ],
        "title": "StreamArgs",
        "type": "object"
      },
      "ITorrent": {
        "$defs": {
          "EpisodeInfo": {
            "properties": {
              "seasonnum": {
                "title": "Seasonnum",
                "type": "integer"
              },
              "epnum": {
                "anyOf": [
                  {
                    "type": "integer"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "title": "Epnum"
              }
            },
            "required": [
              "seasonnum"
            ],
            "title": "EpisodeInfo",
            "type": "object"
          },
          "ProviderSource": {
            "enum": [
              "kickass",
              "horriblesubs",
              "rarbg",
              "torrentscsv",
              "nyaasi",
              "piratebay"
            ],
            "title": "ProviderSource",
            "type": "string"
          }
        },
        "properties": {
          "source": {
            "$ref": "#/$defs/ProviderSource"
          },
          "title": {
            "title": "Title",
            "type": "string"
          },
          "seeders": {
            "title": "Seeders",
            "type": "integer"
          },
          "download": {
            "pattern": "^magnet:",
            "title": "Download",
            "type": "string"
          },
          "category": {
            "title": "Category",
            "type": "string"
          },
          "episode_info": {
            "anyOf": [
              {
                "$ref": "#/$defs/EpisodeInfo"
              },
              {
                "type": "null"
              }
            ],
            "default": null
          }
        },
        "required": [
          "source",
          "title",
          "seeders",
          "download",
          "category"
        ],
        "title": "ITorrent",
        "type": "object"
      }
    }
  }
}